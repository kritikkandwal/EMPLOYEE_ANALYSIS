{% extends "base.html" %}

{% block title %}Leaderboard - AI Productivity Intelligence{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">
        <i class="fas fa-trophy"></i>
        Productivity Leaderboard
    </h1>
    <p class="page-subtitle">Compete with colleagues and track your ranking</p>
</div>

<div class="leaderboard-controls">
    <div class="filter-group">
        <label for="timeframe">Timeframe:</label>
        <select id="timeframe" class="filter-select">
            <option value="weekly">This Week</option>
            <option value="monthly" selected>This Month</option>
            <option value="quarterly">This Quarter</option>
        </select>
    </div>
    <div class="filter-group">
        <label for="department">Department:</label>
        <select id="department" class="filter-select">
            <option value="all">All Departments</option>
            <option value="engineering">Engineering</option>
            <option value="design">Design</option>
            <option value="marketing">Marketing</option>
            <option value="sales">Sales</option>
        </select>
    </div>
    <div class="view-toggle">
        <button class="view-btn active" data-view="global">
            <i class="fas fa-globe"></i>
            Global
        </button>
        <button class="view-btn" data-view="department">
            <i class="fas fa-users"></i>
            Department
        </button>
    </div>
</div>

<div class="leaderboard-grid">
    <!-- Top 3 Winners -->
    <div class="winners-section">
        <div class="winner-card second-place">
            <div class="winner-rank">2</div>
            <div class="winner-avatar">
                <i class="fas fa-user"></i>
            </div>
            <div class="winner-info">
                <h4>Sarah Chen</h4>
                <p>Engineering</p>
                <div class="winner-score">88.5</div>
            </div>
            <div class="winner-badges">
                <span class="badge gold">üèÜ</span>
                <span class="badge">‚≠ê</span>
            </div>
        </div>

        <div class="winner-card first-place">
            <div class="winner-rank">1</div>
            <div class="winner-avatar">
                <i class="fas fa-crown"></i>
            </div>
            <div class="winner-info">
                <h4>Alex Rodriguez</h4>
                <p>Design</p>
                <div class="winner-score">92.3</div>
            </div>
            <div class="winner-badges">
                <span class="badge platinum">üíé</span>
                <span class="badge">üöÄ</span>
            </div>
        </div>

        <div class="winner-card third-place">
            <div class="winner-rank">3</div>
            <div class="winner-avatar">
                <i class="fas fa-user"></i>
            </div>
            <div class="winner-info">
                <h4>Mike Johnson</h4>
                <p>Marketing</p>
                <div class="winner-score">85.7</div>
            </div>
            <div class="winner-badges">
                <span class="badge silver">ü•à</span>
                <span class="badge">‚ö°</span>
            </div>
        </div>
    </div>

    <!-- Leaderboard List -->
    <div class="glass-card leaderboard-list">
        <div class="list-header">
            <h3>Global Rankings</h3>
            <div class="list-stats">
                <span>Total Participants: 142</span>
                <span>Your Rank: #8</span>
            </div>
        </div>
        
        <div class="leaderboard-rows">
            {% for i in range(4, 15) %}
            <div class="leaderboard-row {% if i == 8 %}current-user{% endif %}">
                <div class="rank">#{{ i }}</div>
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <h5>User {{ i }}</h5>
                        <span>Department {{ ['Engineering', 'Design', 'Marketing', 'Sales'][i % 4] }}</span>
                    </div>
                </div>
                <div class="user-score">
                    <div class="score-value">{{ 85 - (i * 1.2) | round(1) }}</div>
                    <div class="score-progress">
                        {% set progress = 85 - (i * 1.2) %}
                        <div class="progress-bar" style="--progress: {{ progress }}%;"></div>

                    </div>
                </div>
                <div class="user-badges">
                    {% if i % 3 == 0 %}
                    <span class="badge small">‚≠ê</span>
                    {% endif %}
                    {% if i % 4 == 0 %}
                    <span class="badge small">üöÄ</span>
                    {% endif %}
                </div>
                <div class="trend">
                    {% if i % 2 == 0 %}
                    <i class="fas fa-arrow-up trend-up"></i>
                    {% else %}
                    <i class="fas fa-arrow-down trend-down"></i>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- User Stats Card -->
    <div class="glass-card user-stats-card">
        <h3>Your Performance</h3>
        <div class="user-rank-highlight">
            <div class="rank-circle">#8</div>
            <div class="rank-info">
                <h4>Great Job!</h4>
                <p>You're in the top 6%</p>
            </div>
        </div>
        
        <div class="performance-metrics">
            <div class="metric">
                <label>Productivity Score</label>
                <div class="metric-value">82.1</div>
                <div class="metric-change positive">
                    <i class="fas fa-arrow-up"></i>
                    +2.3 from last week
                </div>
            </div>
            <div class="metric">
                <label>Focus Ratio</label>
                <div class="metric-value">78%</div>
                <div class="metric-change positive">
                    <i class="fas fa-arrow-up"></i>
                    +5% improvement
                </div>
            </div>
            <div class="metric">
                <label>Tasks Completed</label>
                <div class="metric-value">47</div>
                <div class="metric-change">
                    This month
                </div>
            </div>
        </div>

        <div class="ai-suggestion">
            <h4>AI Suggestion</h4>
            <p>Maintain your current focus during morning hours to break into top 5. Your Tuesday performance is exceptional!</p>
        </div>
    </div>

    <!-- Badge Distribution -->
    <div class="glass-card badges-distribution">
        <h3>Top Badges This Month</h3>
        <div class="badges-list">
            <div class="badge-dist-item">
                <span class="badge-icon">üèÜ</span>
                <div class="badge-info">
                    <strong>Focus Master</strong>
                    <span>Earned by 12 users</span>
                </div>
                <div class="badge-count">12</div>
            </div>
            <div class="badge-dist-item">
                <span class="badge-icon">‚≠ê</span>
                <div class="badge-info">
                    <strong>Early Bird</strong>
                    <span>Earned by 8 users</span>
                </div>
                <div class="badge-count">8</div>
            </div>
            <div class="badge-dist-item">
                <span class="badge-icon">üöÄ</span>
                <div class="badge-info">
                    <strong>Task Maestro</strong>
                    <span>Earned by 5 users</span>
                </div>
                <div class="badge-count">5</div>
            </div>
            <div class="badge-dist-item">
                <span class="badge-icon">üí™</span>
                <div class="badge-info">
                    <strong>Consistency King</strong>
                    <span>Earned by 3 users</span>
                </div>
                <div class="badge-count">3</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.leaderboard-controls {
    display: flex;
    gap: 20px;
    margin-bottom: 30px;
    flex-wrap: wrap;
    align-items: center;
}

.filter-group {
    display: flex;
    align-items: center;
    gap: 10px;
}

.filter-group label {
    color: var(--text-secondary);
    font-weight: 600;
}

.filter-select {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--glass-border);
    border-radius: 8px;
    padding: 8px 12px;
    color: var(--text-primary);
    cursor: pointer;
}

.view-toggle {
    display: flex;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 50px;
    padding: 4px;
    margin-left: auto;
}

.view-btn {
    padding: 8px 16px;
    border: none;
    background: transparent;
    color: var(--text-secondary);
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.875rem;
}

.view-btn.active {
    background: var(--primary-glow);
    color: var(--bg-dark);
    font-weight: 600;
}

.leaderboard-grid {
    display: grid;
    grid-template-columns: 1fr 300px;
    gap: 24px;
}

.winners-section {
    grid-column: 1 / -1;
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 20px;
    margin-bottom: 30px;
    align-items: end;
}

.winner-card {
    background: var(--bg-card);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    border-radius: 20px;
    padding: 30px 20px;
    text-align: center;
    position: relative;
    transition: all 0.3s ease;
}

.winner-card:hover {
    transform: translateY(-5px);
}

.first-place {
    order: 2;
    border-color: #ffd700;
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), transparent);
}

.second-place {
    order: 1;
    border-color: #c0c0c0;
    background: linear-gradient(135deg, rgba(192, 192, 192, 0.1), transparent);
}

.third-place {
    order: 3;
    border-color: #cd7f32;
    background: linear-gradient(135deg, rgba(205, 127, 50, 0.1), transparent);
}

.winner-rank {
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--primary-glow);
    color: var(--bg-dark);
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 0.875rem;
}

.first-place .winner-rank {
    background: #ffd700;
    width: 40px;
    height: 40px;
    font-size: 1rem;
}

.winner-avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 15px;
    font-size: 2rem;
}

.first-place .winner-avatar {
    width: 100px;
    height: 100px;
    font-size: 2.5rem;
    background: linear-gradient(135deg, var(--primary-glow), #ffd700);
    color: var(--bg-dark);
}

.winner-info h4 {
    margin-bottom: 5px;
    font-size: 1.25rem;
}

.winner-info p {
    color: var(--text-secondary);
    margin-bottom: 10px;
    font-size: 0.875rem;
}

.winner-score {
    font-size: 1.5rem;
    font-weight: bold;
    background: linear-gradient(135deg, var(--primary-glow), var(--secondary-glow));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.winner-badges {
    margin-top: 10px;
    display: flex;
    justify-content: center;
    gap: 5px;
}

.badge {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.875rem;
}

.badge.small {
    width: 24px;
    height: 24px;
    font-size: 0.75rem;
}

.leaderboard-list {
    grid-column: 1;
}

.list-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--glass-border);
}

.list-stats {
    display: flex;
    gap: 15px;
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.leaderboard-rows {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.leaderboard-row {
    display: grid;
    grid-template-columns: auto 1fr auto auto auto;
    align-items: center;
    gap: 15px;
    padding: 15px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 12px;
    transition: all 0.3s ease;
}

.leaderboard-row:hover {
    background: rgba(255, 255, 255, 0.05);
    transform: translateX(5px);
}

.leaderboard-row.current-user {
    border: 1px solid var(--primary-glow);
    background: rgba(0, 255, 255, 0.05);
}

.rank {
    font-weight: bold;
    color: var(--text-secondary);
    min-width: 40px;
}

.user-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.user-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
}

.user-details h5 {
    margin-bottom: 2px;
}

.user-details span {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.user-score {
    display: flex;
    align-items: center;
    gap: 10px;
    min-width: 100px;
}

.score-value {
    font-weight: bold;
    min-width: 40px;
}

.score-progress {
    flex: 1;
    background: rgba(255, 255, 255, 0.1);
    height: 6px;
    border-radius: 3px;
    overflow: hidden;
}

.progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--primary-glow), var(--accent-glow));
    border-radius: 3px;
    transition: width 0.3s ease;
    width: var(--progress, 0%);
}


.user-badges {
    display: flex;
    gap: 4px;
}

.trend-up {
    color: var(--accent-glow);
}

.trend-down {
    color: #ff4444;
}

.user-stats-card,
.badges-distribution {
    grid-column: 2;
}

.user-rank-highlight {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 12px;
}

.rank-circle {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary-glow), var(--secondary-glow));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
    font-weight: bold;
    color: var(--bg-dark);
}

.rank-info h4 {
    margin-bottom: 5px;
    color: var(--accent-glow);
}

.performance-metrics {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-bottom: 20px;
}

.metric {
    padding: 15px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 8px;
}

.metric label {
    display: block;
    color: var(--text-secondary);
    font-size: 0.875rem;
    margin-bottom: 5px;
}

.metric-value {
    font-size: 1.5rem;
    font-weight: bold;
    margin-bottom: 5px;
    background: linear-gradient(135deg, var(--primary-glow), var(--secondary-glow));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.metric-change {
    font-size: 0.75rem;
}

.metric-change.positive {
    color: var(--accent-glow);
}

.ai-suggestion {
    padding: 15px;
    background: rgba(0, 255, 255, 0.05);
    border-radius: 8px;
    border-left: 3px solid var(--primary-glow);
}

.ai-suggestion h4 {
    margin-bottom: 8px;
    color: var(--primary-glow);
}

.ai-suggestion p {
    font-size: 0.875rem;
    color: var(--text-secondary);
    line-height: 1.5;
}

.badges-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.badge-dist-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 8px;
}

.badge-icon {
    font-size: 1.25rem;
}

.badge-info {
    flex: 1;
}

.badge-info strong {
    display: block;
    margin-bottom: 2px;
}

.badge-info span {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.badge-count {
    background: var(--primary-glow);
    color: var(--bg-dark);
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: bold;
}

@media (max-width: 1024px) {
    .leaderboard-grid {
        grid-template-columns: 1fr;
    }
    
    .user-stats-card,
    .badges-distribution {
        grid-column: 1;
    }
}

@media (max-width: 768px) {
    .winners-section {
        grid-template-columns: 1fr;
    }
    
    .first-place {
        order: 1;
    }
    
    .leaderboard-controls {
        flex-direction: column;
        align-items: stretch;
    }
    
    .view-toggle {
        margin-left: 0;
        justify-content: center;
    }
    
    .leaderboard-row {
        grid-template-columns: auto 1fr auto;
        gap: 10px;
    }
    
    .user-badges,
    .trend {
        display: none;
    }
}
</style>
{% endblock %}